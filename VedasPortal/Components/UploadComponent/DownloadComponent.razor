@using VedasPortal.Services.FileUploadDownload;
@inject IFileDownload fileDownload;

<h3>Yüklü Dosyalar</h3>
@if (previewImages.Count > 0)
{
<div class="card">
    <div class="row align-items-start">

        @foreach (var item in previewImages)
        {
            // url'den içerik türünü çıkar
            var type = item.Split(";");
<div class="col-2">

    @if (type[0].Contains("image"))
    {
        // görüntüleri doğrudan önizleyin
<img class="rounded float-left" src="@item" width="100" height="100" /> }
else
{
// Diğer dosya türleri için logoları kullanın.
// örneğin, pdf dosyaları için pdf logosunu kullanırız
if (type[0].Contains("pdf"))
{
<img class="rounded float-left" src="images/pdf_logo.png" width="100" height="100" />}
}
    <button @onclick="() => DownloadFile(item)">İndir</button>
</div>}
    </div>
</div>}

@code { // yüklenen dosyalar için önizleme URL'lerinin listesi
    private IList<string> previewImages = new List<string>();

    // bileşen başlatıldığında çağrılan yöntem
    protected async override Task OnInitializedAsync()
    {
        // get all the uploaded files for preview
        previewImages = await fileDownload.GetUploadedFiles();
    }

    // Önizleme için yüklenen tüm dosyaları al
    private async Task DownloadFile(string url)
    {
        // dosya indirme hizmetinden dosya indirme yöntemini yürütün
        await fileDownload.DownloadFile(url);
    } }
