@page "/video/ekle"
@page "/video/duzenle/{VideoId:int}"
@inherits VideoEklemeModeli

<div class="col-12">
    <EditForm Model="@video" OnValidSubmit="Kayit">
        <DataAnnotationsValidator />
        <CardComponent cardStyle="Style.primary">
            <CardHeader>
                Eğitim @Title
            </CardHeader>
            <CardBody>
                <div class="col-md-6 float-left">

                    <div class="form-group row">
                        <label class="form-label col-md-2">İçerik Ekleyin</label>
                        <div class="col-md-10">
                            <MultipleUpload @bind-ValueInput="@VideoDosya.Yolu" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-12">Video Başlığı</label>
                        <input type="text" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-12">Video Yolu</label>
                        <input type="text" class="form-control">
                    </div>



                    <div class="form-group row">
                        <label class="control-label col-md-2">Video Başlığı</label>
                        <div class="col-md-10">
                            <InputText class="form-control" @bind-Value="video.Baslik" />
                        </div>
                        <ValidationMessage For="@(() => video.Baslik)" />
                    </div>

                    <div class="form-group row">
                        <label class="control-label col-md-2">Alt Başlık</label>
                        <div class="col-md-10">
                            <InputText class="form-control" @bind-Value="video.AltBaslik" />
                        </div>
                        <ValidationMessage For="@(() => video.AltBaslik)" />
                    </div>

                    <div class="form-group row">
                        <label class="control-label col-md-2">Ekleyen Personel</label>
                        <div class="col-md-10">
                            <InputText class="form-control" @bind-Value="video.KaydedenKullanici" />
                        </div>
                        <ValidationMessage For="@(() => video.KaydedenKullanici)" />
                    </div>



                    <div class="form-group row">
                        <label for="Kategori" class="control-label col-md-2">Video Görecek Birimi Seçin</label>
                        <div class="col-md-10">
                            <InputSelect @bind-Value="@video.Birimler" class="form-control">
                                <option></option>
                                @if (Birimler != null)
                                {
        @foreach (var kategori in Birimler)
        {
<option value="@kategori.Key"> @kategori.Value </option>}}

                            </InputSelect>
                        </div>
                    </div>

                </div>
                <div class="col-md-6 float-right">

                    <div class="form-group activity-detail">

                        <CKEditorBlazor Id="MyEditor1"
                                        @bind-Value=@video.Aciklama
                                        Label="Eğitim Hakkında Detaylı Bilgi"
                                        UrlToPostImage="images/uploaded/">
                        </CKEditorBlazor>
                    </div>

                    <div class="form-group row">
                        <label for="Kategori" class="control-label col-md-2">Kategori Seçin</label>
                        <div class="col-md-10">
                            <InputSelect @bind-Value="@video.Kategori" class="form-control">
                                <option></option>
                                @if (Kategoriler != null)
                                {
        @foreach (var kategori in Kategoriler)
        {
<option value="@kategori.Key"> @kategori.Value </option>}}

                            </InputSelect>
                        </div>
                    </div>
                    <br />
                    <div class="row">

                        <div class="form-group row col-md-4">
                            <label class="control-label col-md-6">Video Uzunluğu</label>
                            <div class="col-md-6">
                                <InputNumber class="form-control" @bind-Value="video.Uzunluk" />
                            </div>
                            <ValidationMessage For="@(() => video.Uzunluk)" />
                        </div>

                        <div class="form-group row col-md-4">
                            <label class="control-label col-md-8">Video Şimdi Yayınlasın Mı?</label>
                            <div class="col-md-4">
                                <InputCheckbox class="form-control" @bind-Value="video.AktifPasif" />
                            </div>
                            <ValidationMessage For="@(() => video.AktifPasif)" />
                        </div>

                    </div>


                </div>



            </CardBody>
            <CardFotter>
                <div class="form-group text-left">
                    <button class="btn btn-primary" type="submit" @onclick="Kayit">Kaydet</button>
                    <button class="btn btn-danger" type="reset" @onclick="Temizle">Tümünü Temizle</button>
                </div>
            </CardFotter>
        </CardComponent>

        <style>
            .row {
                display: -ms-flexbox;
                display: -webkit-box;
                display: flex;
                -ms-flex-wrap: wrap;
                flex-wrap: wrap;
                margin-top: -15px;
                margin-right: -15px;
                margin-left: -15px;
            }
        </style>
    </EditForm>
</div>


@if (Videolar == null)

{
<p><em>Yükleniyor...</em></p> }

else

{

<div class="col-12">

    <CardComponent cardStyle="Style.primary">

        <CardHeader>
            <div class="float-left">
                <div class="col-md-12">
                    Videolar
                </div>
            </div>

        </CardHeader>
        <CardBody>
            <div class="table-responsive">
                <table class="table table-striped" id="table-2">
                    <thead>
                        <tr>
                            <th class="text-center pt-3">
                                <div class="custom-checkbox custom-checkbox-table custom-control">
                                    <input type="checkbox" data-checkboxes="mygroup" data-checkbox-role="dad"
                                           class="custom-control-input" id="checkbox-all">
                                    <label for="checkbox-all" class="custom-control-label">&nbsp;</label>
                                </div>
                            </th>
                            <th>Video Başlığı</th>

                            <th>Video Durumu</th>

                            <th>İşlemler</th>
                        </tr>
                    </thead>
                    <tbody>



                        @foreach (var video in Videolar)

                        {


    <tr>
        <td class="text-center pt-2">
            <div class="custom-checkbox custom-control">
                <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input"
                       id="checkbox-1">
                <label for="checkbox-1" class="custom-control-label">&nbsp;</label>
            </div>
        </td>
        <td>@video.Baslik</td>

        <td>
            @if (video.AktifPasif == true)
            {


<div class="badge badge-success badge-shadow">Yayında</div> }
else
{
<div class="badge badge-warning badge-shadow">Yayında Değil</div>}
        </td>


        <td>
            <a href="@($"video/detay/{video.Id}")" class="btn btn-primary">Video Detayı</a>
            <a href='/video/duzenle/@video.Id' class="btn btn-info btn-outline-dark" role="button">Düzenle</a>
            <button class="btn btn-danger" data-toggle="modal" data-target="#deleteEmpModal"
                    @onclick="@(() => {DialogGorunur="block"; SilmeyiOnayla(video.Id);})">
                Sil
            </button>
        </td>
    </tr>
}
                    </tbody>
                </table>
            </div>

        </CardBody>
    </CardComponent>

</div>


                <ModalComponent @ref="ModalDialog">
                    <ModalHeader>
                        <h5>Bu veriyi silmek istediğinize emin misiniz ??</h5>
                    </ModalHeader>

                    <ModalFooter>
                        <button class="btn btn-danger" @onclick="@(()=>{Sil(); ModalDialog.Close();})">Evet</button>
                        <button class="btn btn-warning" @onclick="@(()=>{ModalDialog.Close();})">Hayır</button>
                    </ModalFooter>
                </ModalComponent>}


<style>
    .modal-content {
        max-width: 100%;
        border: none;
        margin-top: 200px;
        box-shadow: 0 3px 8px rgb(0 0 0 / 5%);
    }

    .row {
        display: -ms-flexbox;
        display: -webkit-box;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        margin-top: -15px;
        margin-right: -15px;
        margin-left: -15px;
    }
</style>